{% extends "partials/base.html" %}


{% block content %}
<div class="purchase-container">
    <!-- Event Header Section with Image and Organizer Logo -->
    <div class="event-header">
        <div class="event-image-container">
            {% if event.image_url %}
                <img src="{{ event.image_url }}" alt="Event Image" class="event-image">
            {% else %}
                <img src="{{ url_for('static', filename='images/event-placeholder.png') }}" alt="Event Image" class="event-image">
            {% endif %}
            <div class="event-overlay"></div>
        </div>
        <div class="event-info">
            <div class="organizer-badge">
                {% if organizer.business_logo_url %}
                    <img src="{{ organizer.business_logo_url }}" alt="Organizer Logo" class="organizer-logo">
                {% else %}
                    <img src="{{ url_for('static', filename='images/logo-placeholder.png') }}" alt="Organizer Logo" class="organizer-logo">
                {% endif %}
                <span class="organizer-name">{{ organizer.business_name }}</span>
            </div>
            <h1>{{ event.name }}</h1>
            <p class="event-description">{{ event.description }}</p>
            <div class="event-details">
                <div class="detail-item">
                    <i class="fas fa-calendar"></i>
                    <span>{{ event.date | datetimeformat }}</span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-clock"></i>
                    <span>{{ event.start_time }} - {{ event.end_time }}</span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>{{ event.location }}</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Discount Banner -->
<div id="discount-banner" class="discount-banner" style="display: none;">
    <div class="discount-content">
        <span class="offer-badge">Limited Time Offer!</span>
        <h3 id="discount-message"></h3>
        <p class="discount-subtitle"></p>
    </div>
</div>

<!-- Purchase Form -->
<div class="purchase-form">
    {% if enforce_individual_ticket_limits %}
        <p>Please select the number of tickets for each ticket type (limited availability):</p>
    {% else %}
        <p>Total Tickets Available: {{ tickets_available }}</p>
        <p>Please select the number of tickets for each ticket type:</p>
    {% endif %}

    <form id="purchase-form" method="POST" action="{{ url_for('purchase', event_id=event.id) }}" enctype="multipart/form-data">
        <!-- Buyer Information -->
        <h2>Your Information</h2>

        <div class="form-group">
            <label for="full_name">Full Name:</label>
            <input type="text" id="full_name" name="full_name" required>
        </div>

        <div class="form-group">
            <label for="email">Email Address:</label>
            <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
            <label for="phone_number">Telephone Number:</label>
            <input type="tel" id="phone_number" name="phone_number" required>
        </div>

        <!-- Ticket Selection -->
        <h2>Select Tickets</h2>
        <div id="ticket_selection">
            {% for ticket_type in ticket_types %}
                <div class="ticket-type">
                    <div class="ticket-header">
                        <div class="ticket-info">
                            <h3>{{ ticket_type.name }}</h3>
                            {% if ticket_type.description %}
                                <p class="ticket-description">{{ ticket_type.description }}</p>
                            {% endif %}
                            {% if enforce_individual_ticket_limits %}
                                {% set available = (ticket_type.quantity or 0) - (ticket_type.sold_count or 0) %}
                                {% if available > 0 %}
                                    <span class="tickets-remaining">
                                        Only {{ available }} tickets left!
                                    </span>
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class="ticket-price-display" id="price-display-{{ ticket_type.id }}">
                            <span class="original-price">£{{ "{:.2f}".format(ticket_type.price) }}</span>
                            <span class="discounted-price"></span>
                        </div>
                    </div>
                    <div class="ticket-quantity">
                        <label for="quantity_{{ ticket_type.id }}">Number of Tickets:</label>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-input="quantity_{{ ticket_type.id }}">-</button>
                            <input
                                type="number"
                                id="quantity_{{ ticket_type.id }}"
                                name="quantity_{{ ticket_type.id }}"
                                min="0"
                                {% if enforce_individual_ticket_limits %}
                                    {% set available = (ticket_type.quantity or 0) - (ticket_type.sold_count or 0) %}
                                    max="{{ available if available > 0 else 0 }}"
                                    {% if available <= 0 %}disabled{% endif %}
                                {% endif %}
                                value="0"
                                data-ticket-type-id="{{ ticket_type.id }}"
                                data-ticket-price="{{ "{:.2f}".format(ticket_type.price) }}"
                                data-ticket-type-name="{{ ticket_type.name }}"
                                class="ticket-input"
                            >
                            <button type="button" class="quantity-btn plus" data-input="quantity_{{ ticket_type.id }}">+</button>
                        </div>
                        {% if enforce_individual_ticket_limits %}
                            {% set available = (ticket_type.quantity or 0) - (ticket_type.sold_count or 0) %}
                            {% if available <= 0 %}
                                <span class="sold-out-badge">Sold Out</span>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>



        <!-- Question Fields -->
        <div id="question_forms">
            {% if default_questions or custom_questions %}
                <h2>Additional Information</h2>
                
                <!-- Default Questions -->
                {% if default_questions %}
                    {% for question in default_questions %}
                        <div class="form-group question-group">
                            <label for="default_{{ question.id }}">
                                {{ question.question_text }}
                                {% if question.required %}<span class="required">*</span>{% endif %}
                            </label>
                            <input type="text" 
                                name="default_answer_{{ question.id }}" 
                                id="default_{{ question.id }}"
                                {% if question.required %}required{% endif %}>
                        </div>
                    {% endfor %}
                {% endif %}

                <!-- Custom Questions -->
                {% if custom_questions %}
                    {% for question in custom_questions %}
                        <div class="form-group question-group">
                            <label for="custom_{{ question.id }}">
                                {{ question.question_text }}
                                {% if question.required %}<span class="required">*</span>{% endif %}
                            </label>
                            <input type="text" 
                                name="custom_answer_{{ question.id }}" 
                                id="custom_{{ question.id }}"
                                {% if question.required %}required{% endif %}>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endif %}
        </div>


        <!-- Terms and Conditions Checkboxes -->
        <h2>Terms and Conditions</h2>
        {% if organizer_terms_link %}
        <div class="form-group checkbox-group">
            <input type="checkbox" id="accept_organizer_terms" name="accept_organizer_terms" required>
            <label for="accept_organizer_terms">
                I accept the <a href="{{ organizer_terms_link }}" target="_blank">event organiser's Terms and Conditions</a>.
            </label>
        </div>
        {% endif %}
        <div class="form-group checkbox-group">
            <input type="checkbox" id="accept_platform_terms" name="accept_platform_terms" required>
            <label for="accept_platform_terms">
                I accept the <a href="{{ platform_terms_link }}" target="_blank">platform's Terms and Conditions</a>.
            </label>
        </div>

        <!-- Update the promo code section -->
        <div class="promo-code-section">
            <label for="promo_code">Promo Code (if applicable):</label>
            <div class="promo-code-input-group">
                <input type="text" id="promo_code" name="promo_code">
                <button type="button" id="check_promo" class="check-promo-btn">Check Code</button>
            </div>
            <span id="promo_message" class="promo-message"></span>
            <input type="hidden" id="validated_promo_code" name="validated_promo_code">
        </div>

        <input type="submit" value="Proceed to Payment" class="submit-btn">
    </form>

    {% if error %}
        <p class="error-msg">{{ error }}</p>
    {% endif %}
</div>

<!-- Add this before your main script -->
<script type="application/json" id="questions-data">
    {{ questions | tojson | safe }}
</script>

<script type="application/json" id="discount-config">
    {{ discount_config | tojson | safe }}
</script>

<script>
    var discountConfig = JSON.parse(document.getElementById('discount-config').textContent || '{}');
    var questions = JSON.parse(document.getElementById('questions-data').textContent || '[]');

    // Get the total available tickets from the displayed text
    const ticketsAvailableText = document.querySelector('.purchase-form p')?.textContent;
    const totalTicketsAvailable = ticketsAvailableText ? 
        parseInt(ticketsAvailableText.match(/Total Tickets Available: (\d+)/)?.[1]) : 0;

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Only initialize non-promo discounts
        if (discountConfig && discountConfig.type !== 'promo_code') {
            initializeDiscountBanner();
            updatePriceDisplays(getTotalQuantity());
        }
        
        var ticketInputs = document.querySelectorAll('.ticket-input');
        ticketInputs.forEach(function(input) {
            input.addEventListener('change', updateQuestionForms);
            input.addEventListener('input', updateQuestionForms);
        });

        // Updated plus/minus button handlers
        document.querySelectorAll('.quantity-btn').forEach(button => {
            button.addEventListener('click', function() {
                const inputId = this.getAttribute('data-input');
                const input = document.getElementById(inputId);
                let value = parseInt(input.value) || 0;
                
                if (this.classList.contains('plus')) {
                    // Calculate total selected tickets excluding current input
                    const totalSelected = Array.from(document.querySelectorAll('.ticket-input'))
                        .reduce((sum, inp) => {
                            return sum + (inp.id === inputId ? 0 : (parseInt(inp.value) || 0));
                        }, 0);
                    
                    // Check if adding one more would exceed available tickets
                    if (totalSelected + value + 1 > totalTicketsAvailable) {
                        alert(`Sorry, only ${totalTicketsAvailable} tickets are available for this event.`);
                        return;
                    }
                    
                    value++;
                } else if (this.classList.contains('minus')) {
                    value = Math.max(0, value - 1);
                }
                
                input.value = value;
                input.dispatchEvent(new Event('input'));
            });
        });

        // Update input validation for direct number entry
        document.querySelectorAll('.ticket-input').forEach(function(input) {
            input.addEventListener('input', function(e) {
                let value = parseInt(this.value) || 0;
                
                // Ensure value is not negative
                if (value < 0) {
                    value = 0;
                }
                
                // Calculate total tickets across all ticket types except current input
                const totalSelected = Array.from(document.querySelectorAll('.ticket-input'))
                    .reduce((sum, inp) => {
                        return sum + (inp === this ? 0 : (parseInt(inp.value) || 0));
                    }, 0);
                
                // Check against available tickets
                if (totalSelected + value > totalTicketsAvailable) {
                    value = totalTicketsAvailable - totalSelected;
                    alert(`Sorry, only ${totalTicketsAvailable} tickets are available for this event. You cannot select more than ${value} tickets for this ticket type.`);
                }
                
                // Update input value
                this.value = value;
                
                // Update forms and prices
                updateQuestionForms();
                updateTotalPrice();
            });
        });
    });

    function updatePriceDisplays(totalQuantity) {
    var ticketInputs = document.querySelectorAll('.ticket-input');
    // For bulk discounts, we care about total quantity across ALL ticket types
    var applyDiscount = discountConfig && 
                       discountConfig.type === 'bulk' && 
                       totalQuantity >= discountConfig.minTickets;
        
        if (discountConfig && discountConfig.percentage > 0) {
            switch(discountConfig.type) {
                case 'early_bird':
                    const validUntil = new Date(discountConfig.valid_until);
                    const now = new Date();
                    applyDiscount = now < validUntil && 
                        (!discountConfig.max_tickets || totalQuantity <= discountConfig.max_tickets);
                    break;
                    
                case 'bulk':
                    applyDiscount = totalQuantity >= discountConfig.minTickets;
                    break;

                case 'promo_code':
                    // Only apply promo code discount if we have a code
                    applyDiscount = Boolean(discountConfig.code);
                    break;
            }
        }

        ticketInputs.forEach(function(input) {
            var ticketTypeId = input.getAttribute('data-ticket-type-id');
            var originalPrice = parseFloat(input.getAttribute('data-ticket-price'));
            var priceDisplay = document.getElementById(`price-display-${ticketTypeId}`);
            var originalPriceSpan = priceDisplay.querySelector('.original-price');
            var discountedPriceSpan = priceDisplay.querySelector('.discounted-price');

            if (applyDiscount) {
                var discountedPrice = originalPrice * (1 - discountConfig.percentage/100);
                originalPriceSpan.classList.add('strikethrough');
                discountedPriceSpan.textContent = `£${discountedPrice.toFixed(2)}`;
                discountedPriceSpan.style.display = 'inline';
                
                // Add a discount label
                let discountLabel = priceDisplay.querySelector('.discount-label');
                if (!discountLabel) {
                    discountLabel = document.createElement('span');
                    discountLabel.className = 'discount-label';
                    priceDisplay.appendChild(discountLabel);
                }
                discountLabel.textContent = ` (${discountConfig.percentage}% off)`;
            } else {
                originalPriceSpan.classList.remove('strikethrough');
                discountedPriceSpan.style.display = 'none';
                
                // Remove discount label if it exists
                const discountLabel = priceDisplay.querySelector('.discount-label');
                if (discountLabel) {
                    discountLabel.remove();
                }
            }
        });
    }

    function updateTotalPrice() {
        const ticketInputs = document.querySelectorAll('.ticket-input');
        let totalPrice = 0;
        let totalQuantity = getTotalQuantity();
        let originalTotalPrice = 0;

        if (discountConfig && discountConfig.type === 'bulk' && discountConfig.apply_to === 'additional') {
            // Calculate price with discount only on additional tickets
            ticketInputs.forEach(function(input) {
                const quantity = parseInt(input.value) || 0;
                const price = parseFloat(input.getAttribute('data-ticket-price'));
                
                if (quantity > 0) {
                    // First ticket at full price
                    totalPrice += price;
                    originalTotalPrice += quantity * price;

                    // Additional tickets with discount
                    if (quantity > 1 && totalQuantity >= discountConfig.minTickets) {
                        const additionalTickets = quantity - 1;
                        const discountedPrice = price * (1 - discountConfig.percentage / 100);
                        totalPrice += additionalTickets * discountedPrice;
                    } else {
                        // If minimum ticket requirement not met, charge full price
                        totalPrice += (quantity - 1) * price;
                    }
                }
            });
        } else {
            // Regular discount calculation for other cases
            ticketInputs.forEach(function(input) {
                const quantity = parseInt(input.value) || 0;
                const originalPrice = parseFloat(input.getAttribute('data-ticket-price'));
                originalTotalPrice += quantity * originalPrice;

                let discountedPrice = originalPrice;
                if (shouldApplyDiscount(totalQuantity)) {
                    discountedPrice = originalPrice * (1 - discountConfig.percentage / 100);
                }

                totalPrice += quantity * discountedPrice;
            });
        }

        // Calculate discount amount
        let discountAmount = originalTotalPrice - totalPrice;

        // Update displays
        const totalPriceElement = document.getElementById('sticky_total_price');
        totalPriceElement.textContent = totalPrice.toFixed(2);

        const originalPriceElement = document.getElementById('sticky_original_price');
        const discountAmountElement = document.getElementById('sticky_discount_amount');

        if (discountAmount > 0) {
            originalPriceElement.textContent = originalTotalPrice.toFixed(2);
            discountAmountElement.textContent = discountAmount.toFixed(2);
            originalPriceElement.parentElement.style.display = 'block';
            discountAmountElement.parentElement.style.display = 'block';
        } else {
            originalPriceElement.parentElement.style.display = 'none';
            discountAmountElement.parentElement.style.display = 'none';
        }

        // Update ticket count display
        const ticketCountElement = document.querySelector('.ticket-count');
        ticketCountElement.textContent = totalQuantity + ' tickets selected';

        // Update sticky total visibility
        const stickyTotal = document.querySelector('.sticky-total');
        stickyTotal.classList.toggle('visible', totalQuantity > 0);
    }

    function shouldApplyDiscount(totalQuantity) {
        if (!discountConfig || discountConfig.percentage <= 0) {
            return false;
        }

        switch (discountConfig.type) {
            case 'early_bird':
                const validUntil = new Date(discountConfig.valid_until);
                const now = new Date();
                return now < validUntil;
            case 'bulk':
                return totalQuantity >= discountConfig.minTickets;
            case 'promo_code':
                return Boolean(discountConfig.code);
            default:
                return false;
        }
    }



    function updateQuestionForms() {
        var ticketInputs = document.querySelectorAll('.ticket-input');
        var formsContainer = document.getElementById('question_forms');
        formsContainer.innerHTML = '';

        // First pass: calculate total quantity
        var totalQuantity = 0;
        ticketInputs.forEach(function(input) {
            totalQuantity += parseInt(input.value) || 0;
        });

        // Check if there are any questions
        if (questions.length === 0) {
            // No questions to ask, so no need to generate forms
            return;
        }

        // Second pass: create forms for each ticket
        ticketInputs.forEach(function(input) {
            var quantity = parseInt(input.value) || 0;
            var ticketTypeId = input.getAttribute('data-ticket-type-id');
            var ticketTypeName = input.getAttribute('data-ticket-type-name');

            // Create question forms for each ticket
            for (var i = 0; i < quantity; i++) {
                var ticketDiv = document.createElement('div');
                ticketDiv.classList.add('attendee-group');

                // Update the heading text
                var attendeeHeader = document.createElement('h3');
                attendeeHeader.textContent = 'Please provide information for ' + ticketTypeName + ' - Ticket ' + (i + 1);
                ticketDiv.appendChild(attendeeHeader);

                questions.forEach(function(question) {
                    var formGroup = document.createElement('div');
                    formGroup.classList.add('form-group');

                    var label = document.createElement('label');
                    label.setAttribute('for', 'ticket_' + ticketTypeId + '_' + i + '_question_' + question.id);
                    label.textContent = question.question_text;

                    var inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.name = 'ticket_' + ticketTypeId + '_' + i + '_question_' + question.id;
                    inputField.id = 'ticket_' + ticketTypeId + '_' + i + '_question_' + question.id;
                    inputField.required = question.required;

                    formGroup.appendChild(label);
                    formGroup.appendChild(inputField);
                    ticketDiv.appendChild(formGroup);
                });

                formsContainer.appendChild(ticketDiv);
            }
        });


            // Update total price display
            var totalPriceElement = document.getElementById('total_price');
            totalPriceElement.textContent = '£' + totalPrice.toFixed(2);

            // Add this line after calculating totalQuantity
            updatePriceDisplays(totalQuantity);
        }

        // Add form submission handler
        document.querySelector('form').addEventListener('submit', function(e) {
            var totalQuantity = Array.from(document.querySelectorAll('.ticket-input'))
                .reduce((sum, input) => sum + (parseInt(input.value) || 0), 0);

            if (discountConfig.apply_to === 'bulk' && 
                totalQuantity > 0 && 
                totalQuantity < discountConfig.minTickets) {
                
                e.preventDefault();
                
                if (confirm(`You're just ${discountConfig.minTickets - totalQuantity} ticket(s) away from saving ${discountConfig.percentage}% on ${discountConfig.apply_to === 'all' ? 'all' : 'additional'} tickets! Would you like to add more tickets?`)) {
                    return false;
                }
            }
        });

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeDiscountBanner();
            updateQuestionForms();
            
            var ticketInputs = document.querySelectorAll('.ticket-input');
            ticketInputs.forEach(function(input) {
                input.addEventListener('change', updateQuestionForms);
                input.addEventListener('input', updateQuestionForms);
            });
        });


        function initializeCountdown() {
            const eventDate = new Date('{{ event.date }}');
            const now = new Date();
            const timeLeft = eventDate - now;
            
            if (timeLeft <= 7 * 24 * 60 * 60 * 1000) { // 7 days in milliseconds
                const countdownElement = document.createElement('div');
                countdownElement.className = 'countdown-timer';
                // Add countdown implementation
                document.querySelector('.event-info').appendChild(countdownElement);
            }
        }

        // Update the promo code verification handler
        document.getElementById('check_promo').addEventListener('click', async function() {
            const promoCode = document.getElementById('promo_code').value.trim();
            const eventId = '{{ event.id }}';
            const messageElement = document.getElementById('promo_message');
            const validatedPromoInput = document.getElementById('validated_promo_code');
            
            if (!promoCode) {
                messageElement.textContent = 'Please enter a promo code';
                messageElement.className = 'promo-message error';
                validatedPromoInput.value = '';  // Clear validated code
                return;
            }

            try {
                const response = await fetch('/verify_promo_code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        event_id: eventId,
                        promo_code: promoCode
                    })
                });

                const data = await response.json();

                if (data.valid) {
                    messageElement.textContent = `Success! ${data.discount}% discount will be applied`;
                    messageElement.className = 'promo-message success';
                    validatedPromoInput.value = promoCode;  // Store validated code
                    
                    // Update the discount configuration
                    discountConfig = {
                        type: 'promo_code',
                        percentage: data.discount,
                        code: promoCode
                    };
                    
                    // Update displays
                    updatePriceDisplays(getTotalQuantity());
                    updateTotalPrice();
                } else {
                    messageElement.textContent = data.message || 'Invalid promo code';
                    messageElement.className = 'promo-message error';
                    validatedPromoInput.value = '';  // Clear validated code
                    
                    if (discountConfig && discountConfig.type === 'promo_code') {
                        discountConfig = null;
                        updatePriceDisplays(getTotalQuantity());
                        updateTotalPrice();
                    }
                }
            } catch (error) {
                messageElement.textContent = 'Error checking promo code';
                messageElement.className = 'promo-message error';
                validatedPromoInput.value = '';  // Clear validated code
                console.error('Promo code verification error:', error);
            }
        });

        function getTotalQuantity() {
            return Array.from(document.querySelectorAll('.ticket-input'))
                .reduce((sum, input) => sum + (parseInt(input.value) || 0), 0);
        }

        // Add this after your existing event listeners
        document.querySelectorAll('.ticket-input').forEach(function(input) {
            input.addEventListener('change', function() {
                updateTotalPrice();
            });
            input.addEventListener('input', function() {
                updateTotalPrice();
            });
        });

        function initializeDiscountBanner() {
            const banner = document.getElementById('discount-banner');
            const message = document.getElementById('discount-message');
            const subtitle = document.querySelector('.discount-subtitle');

            if (!discountConfig || !discountConfig.type) return;

            // Only show banner for early_bird and bulk discounts
            if (discountConfig.type === 'promo_code') {
                banner.style.display = 'none';
                return;
            }

            banner.style.display = 'block';
            banner.className = `discount-banner discount-banner-${discountConfig.type}`;

            switch(discountConfig.type) {
                case 'early_bird':
                    message.textContent = `Early Bird Offer: ${discountConfig.percentage}% OFF!`;
                    const validUntil = new Date(discountConfig.valid_until);
                    subtitle.textContent = `Offer ends ${validUntil.toLocaleDateString()}`;
                    break;

                case 'bulk':
                    message.textContent = `Bulk Discount: ${discountConfig.percentage}% OFF`;
                    subtitle.textContent = discountConfig.apply_to === 'all' 
                        ? `When you buy ${discountConfig.minTickets} or more tickets`
                        : `On additional tickets when you buy ${discountConfig.minTickets} or more`;
                    break;
            }
        }

        // Add this helper function to check total capacity
        function checkTotalCapacity() {
            const totalSelected = Array.from(document.querySelectorAll('.ticket-input'))
                .reduce((sum, input) => sum + (parseInt(input.value) || 0), 0);
            return totalSelected <= totalEventCapacity;
        }

        // Update form submission handler to include capacity check
        document.querySelector('form').addEventListener('submit', function(e) {
            if (!checkTotalCapacity()) {
                e.preventDefault();
                alert(`Sorry, only ${totalEventCapacity} total tickets are available for this event.`);
                return;
            }
            // ... rest of your existing form validation ...
        });
</script>

<style>

    /* Ensure labels align with checkboxes */
.checkbox-group {
    display: flex;
    align-items: flex-start;
    gap: 10px; /* Add spacing between checkbox and label */
    margin-bottom: 1rem; /* Add space below each group */
    font-size: 1rem; /* Ensure text size is readable */
}

.checkbox-group input[type="checkbox"] {
    width: 20px;
    height: 20px;
    appearance: none; /* Remove default styles */
    background: #fff;
    border: 2px solid #ccc;
    border-radius: 4px;
    outline: none;
    cursor: pointer;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.checkbox-group input[type="checkbox"]:checked {
    background: #ff0000; /* Your desired brand color */
    border-color: #ff0000;
    background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="white"><path d="M13.85 4.15a.5.5 0 0 1 0 .7l-7 7a.5.5 0 0 1-.7 0l-3-3a.5.5 0 1 1 .7-.7L6.5 10.79l6.65-6.64a.5.5 0 0 1 .7 0z"/></svg>');
    background-repeat: no-repeat;
    background-position: center;
    background-size: 60%;
}

    .checkbox-group input[type="checkbox"]:focus {
        border-color: #ff0000;
        box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.2); /* Accessibility focus */
    }

    .checkbox-group label {
        color: #333;
        line-height: 1.4;
        cursor: pointer; /* Make the label clickable */
        margin-top: 2px; /* Adjust for better alignment */
    }

    .checkbox-group a {
        color: #ff0000; /* Brand color for links */
        text-decoration: underline;
    }

    .checkbox-group a:hover {
        text-decoration: none;
        color: #cc0000;
    }

    .total-details .price-breakdown {
        display: flex;
        flex-direction: column;
        margin-top: 0.5rem;
    }

    .total-details .original-price,
    .total-details .discount-amount {
        font-size: 0.9rem;
        color: #666;
    }

    .total-details .original-price {
        text-decoration: line-through;
    }

    .total-details .discount-amount {
        color: #28a745; /* Green color for discount amount */
    }

    .total-details .total-price {
        font-size: 1.2rem;
        font-weight: 600;
        color: #ff0000;
        margin-top: 0.5rem;
    }

    /* Modern styles for the purchase page */
    .purchase-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;  /* Add base padding */
        width: 100%;    /* Ensure full width on mobile */
        background: #fff;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
        border-radius: 20px;
        overflow: hidden;
    }

    .event-header {
        position: relative;
        display: flex;
        flex-direction: column;
        background: #fff;
    }

    .event-image-container {
        position: relative;
        width: 100%;
        height: 300px;  /* Reduce height on mobile */
        overflow: hidden;
    }

    @media (min-width: 768px) {
        .event-image-container {
            height: 400px;  /* Larger height on tablet+ */
        }
    }

    .event-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .event-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 50%;
        background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.7));
    }

    .event-info {
        padding: 1.5rem;
        position: relative;
        z-index: 2;
        margin-top: -50px;  /* Reduced overlap on mobile */
        background: #fff;
        border-radius: 20px 20px 0 0;
        box-shadow: 0 -20px 30px rgba(0,0,0,0.1);
    }

    @media (min-width: 768px) {
        .event-info {
            padding: 2rem;
            margin-top: -100px;  /* More overlap on larger screens */
        }
    }

    .organizer-badge {
        display: inline-flex;
        align-items: center;
        background: #fff;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 1rem;
    }

    .organizer-logo {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
    }

    .organizer-name {
        font-weight: 600;
        color: #333;
    }

    .event-info h1 {
        font-size: 2.5rem;
        margin: 1rem 0;
        color: #1a1a1a;
        line-height: 1.2;
    }

    .event-description {
        font-size: 1.1rem;
        color: #666;
        line-height: 1.6;
        margin-bottom: 2rem;
    }

    .event-details {
        display: grid;
        grid-template-columns: 1fr;  /* Single column on mobile */
        gap: 0.75rem;
        margin-top: 2rem;
    }

    @media (min-width: 576px) {
        .event-details {
            grid-template-columns: repeat(2, 1fr);  /* 2 columns on tablet */
        }
    }

    @media (min-width: 992px) {
        .event-details {
            grid-template-columns: repeat(3, 1fr);  /* 3 columns on desktop */
        }
    }

    .detail-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 12px;
        transition: transform 0.2s ease;
    }

    .detail-item:hover {
        transform: translateY(-2px);
    }

    .detail-item i {
        color: #ff0000;
        font-size: 1.2rem;
    }

    /* Modern Discount Banner */
    .discount-banner {
        background: linear-gradient(135deg, #ff4d4d 0%, #ff0000 100%);
        color: white;
        border: none;
        border-radius: 16px;
        padding: 2rem;
        margin: 2rem auto;
        max-width: 1000px;
        box-shadow: 0 4px 20px rgba(255, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
        animation: slideIn 0.6s ease-out;
    }

    @keyframes slideIn {
        from {
            transform: translateY(-100%);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    @keyframes shimmer {
        0% {
            background-position: -1000px 0;
        }
        100% {
            background-position: 1000px 0;
        }
    }

    .discount-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 2;
    }

    .offer-badge {
        background: rgba(255, 255, 255, 0.2);
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 1rem;
        animation: pulse 2s infinite;
    }

    #discount-message {
        color: white;
        font-size: 2rem;
        margin: 0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        background-size: 1000px 100%;
        animation: shimmer 3s infinite linear;
    }

    .discount-subtitle {
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.1rem;
        margin-top: 1rem;
        opacity: 0;
        animation: fadeIn 0.5s ease-out 0.3s forwards;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Add sparkle effect */
    .discount-banner::before,
    .discount-banner::after {
        content: '';
        position: absolute;
        width: 100px;
        height: 100px;
        background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 60%);
        border-radius: 50%;
        pointer-events: none;
        opacity: 0;
    }

    .discount-banner::before {
        top: -50px;
        left: -50px;
        animation: sparkle 4s infinite;
    }

    .discount-banner::after {
        bottom: -50px;
        right: -50px;
        animation: sparkle 4s infinite 2s;
    }

    @keyframes sparkle {
        0% {
            transform: scale(0) rotate(0deg);
            opacity: 0;
        }
        50% {
            transform: scale(1) rotate(180deg);
            opacity: 0.3;
        }
        100% {
            transform: scale(0) rotate(360deg);
            opacity: 0;
        }
    }

    /* Modern Form Styling */
    .purchase-form {
        max-width: 800px;
        margin: 2rem auto;
        padding: 1rem;
        background: #fff;
        border-radius: 20px;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
    }

    @media (min-width: 768px) {
        .purchase-form {
            padding: 2rem;
            margin: 2rem auto;
        }
    }

    .form-group {
        display: flex;
        flex-direction: column;  /* Stack on mobile */
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    @media (min-width: 768px) {
        .form-group {
            display: grid;
            grid-template-columns: 200px 1fr;  /* Side by side on tablet+ */
            gap: 1rem;
            align-items: center;
            margin-bottom: 1.5rem;
        }
    }

    .form-group label {
        font-weight: 500;
        color: #333;
    }

    .form-group input,
    .form-group select {
        width: 100%;
        padding: 0.8rem 1rem;
        border: 2px solid #eee;
        border-radius: 12px;
        transition: border-color 0.3s ease;
    }

    /* For mobile responsiveness */
    @media (max-width: 768px) {
        .form-group {
            grid-template-columns: 1fr;  /* Stack labels and inputs on small screens */
            gap: 0.5rem;
        }
    }

    .submit-btn {
        background: linear-gradient(135deg, #ff4d4d 0%, #ff0000 100%);
        color: white;
        padding: 1rem 2rem;
        border-radius: 12px;
        font-weight: 600;
        font-size: 1.1rem;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
    }

    /* Ticket Selection Styling */
    .ticket-type {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .ticket-type:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .ticket-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
    }

    .ticket-info h3 {
        margin: 0 0 8px 0;
        color: #333;
        font-size: 1.25rem;
    }

    .ticket-description {
        color: #666;
        font-size: 0.95rem;
        margin: 0 0 8px 0;
    }

    .tickets-remaining {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 50px;
        font-size: 0.85rem;
        background: #e8f5e9;
        color: #2e7d32;
    }

    .tickets-remaining.low-stock {
        background: #fff3e0;
        color: #e65100;
    }

    .ticket-price-display {
        text-align: right;
        white-space: nowrap;
    }

    .original-price {
        font-size: 1.5rem;
        font-weight: 600;
        color: #333;
    }

    .discounted-price {
        display: block;
        color: #2e7d32;
        font-weight: 600;
    }

    .ticket-quantity {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 15px;
    }

    .quantity-control {
        display: flex;
        align-items: center;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
    }

    .quantity-btn {
        background: #f5f5f5;
        border: none;
        padding: 8px 15px;
        cursor: pointer;
        font-size: 1.2rem;
        color: #333;
        transition: background-color 0.2s;
    }

    .quantity-btn:hover {
        background: #e0e0e0;
    }

    .ticket-input {
        width: 60px;
        text-align: center;
        border: none;
        border-left: 1px solid #ddd;
        border-right: 1px solid #ddd;
        padding: 8px;
        font-size: 1rem;
        appearance: textfield;
        -moz-appearance: textfield;
    }

    .ticket-input::-webkit-outer-spin-button,
    .ticket-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .sold-out-badge {
        background: #dc3545;
        color: white;
        padding: 4px 12px;
        border-radius: 50px;
        font-size: 0.85rem;
        font-weight: 500;
    }

    @media (max-width: 768px) {
        .ticket-header {
            flex-direction: column;
        }
        
        .ticket-price-display {
            text-align: left;
            margin-top: 10px;
        }
        
        .ticket-quantity {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .quantity-control {
            width: 100%;
        }
        
        .ticket-input {
            flex: 1;
        }
    }

    .sticky-total {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
        padding: 0.75rem;
        z-index: 1000;
        transform: translateY(100%);
        transition: transform 0.3s ease;
    }

    .sticky-total.visible {
        transform: translateY(0);
    }

    .total-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 1rem;
        gap: 1rem;
        flex-direction: column;  /* Stack on mobile */
    }

    @media (min-width: 768px) {
        .sticky-total {
            padding: 1rem;
        }
        
        .total-content {
            flex-direction: row;  /* Side by side on tablet+ */
            justify-content: space-between;
            align-items: center;
        }
    }

    .total-details {
        display: flex;
        flex-direction: column;
    }

    .ticket-count {
        font-size: 0.9rem;
        color: #666;
    }

    .total-price {
        font-size: 1.2rem;
        font-weight: 600;
        color: #ff0000;
    }

    .ticket-quantity {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-top: 1rem;
    }

    .ticket-quantity label {
        font-weight: 500;
        color: #333;
        flex: 1;
    }

    .ticket-quantity input {
        width: 100px;
        padding: 0.8rem 1rem;
        border: 2px solid #eee;
        border-radius: 12px;
        transition: all 0.3s ease;
        text-align: center;
        font-size: 1.1rem;
    }

    .ticket-quantity input:focus {
        border-color: #ff0000;
        outline: none;
        box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1);
    }

    .tickets-remaining {
        display: inline-block;
        background: #fff3f3;
        color: #ff0000;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-size: 0.9rem;
        font-weight: 600;
        margin-top: 0.5rem;
    }

    .ticket-description {
        color: #666;
        font-size: 0.95rem;
        margin: 0.5rem 0;
    }

    /* Different styles for each discount type */
    .discount-banner-early_bird {
        background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
        animation: pulse 2s infinite;
    }

    .discount-banner-bulk {
        background: linear-gradient(135deg, #ff4d4d 0%, #ff0000 100%);
    }

    /* Countdown timer specific styles */
    .discount-banner-early_bird .discount-subtitle {
        background: rgba(255, 255, 255, 0.2);
        padding: 0.5rem 1rem;
        border-radius: 50px;
        margin-top: 1rem;
    }

    .promo-code-input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 0.5rem;
    }

    .check-promo-btn {
        padding: 0.8rem 1.5rem;
        background: #ff0000;
        color: white;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .check-promo-btn:hover {
        background: #cc0000;
    }

    .promo-message {
        display: block;
        margin-top: 0.5rem;
        font-size: 0.9rem;
    }

    .promo-message.success {
        color: #28a745;
    }

    .promo-message.error {
        color: #dc3545;
    }

    /* Add these styles to your existing CSS */
    .strikethrough {
        text-decoration: line-through;
        color: #999;
        margin-right: 8px;
    }

    .discounted-price {
        color: #28a745;
        font-weight: bold;
    }

    .discount-label {
        color: #28a745;
        font-size: 0.9em;
        margin-left: 5px;
    }

    .ticket-price-display {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 5px;
    }

    /* Question Group Styles */
.question-group {
    margin-bottom: 1.5rem;
}

.question-group label {
    font-weight: 600;
    margin-bottom: 0.5rem;
    display: block;
    color: #333;
}

.question-group .required {
    color: #ff0000;
    margin-left: 0.2rem;
}

.question-group input[type="text"],
.question-group select {
    width: 100%;
    padding: 0.8rem 1rem;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 1rem;
    background-color: #fafafa;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    transition: border-color 0.3s ease;
}

.question-group input[type="text"]:focus,
.question-group select:focus {
    background-color: #fff;
    border-color: #ff0000;
    box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.1);
}

.question-group input[type="text"]::placeholder {
    color: #aaa;
}



@media (max-width: 600px) {
    .question-group {
        flex-direction: column;
        align-items: stretch;
    }

    .question-group label {
        width: 100%;
        margin-bottom: 0.5rem;
    }

    .question-group .question-input {
        width: 100%;
    }
}

/* Base container styles */
.purchase-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 1rem;  /* Add base padding */
    width: 100%;    /* Ensure full width on mobile */
}

/* Event header responsive adjustments */
.event-image-container {
    height: 300px;  /* Reduce height on mobile */
}

@media (min-width: 768px) {
    .event-image-container {
        height: 400px;  /* Larger height on tablet+ */
    }
}

/* Event info responsive styling */
.event-info {
    padding: 1.5rem;
    margin-top: -50px;  /* Reduced overlap on mobile */
}

@media (min-width: 768px) {
    .event-info {
        padding: 2rem;
        margin-top: -100px;  /* More overlap on larger screens */
    }
}

/* Event details grid responsiveness */
.event-details {
    display: grid;
    grid-template-columns: 1fr;  /* Single column on mobile */
    gap: 0.75rem;
}

@media (min-width: 576px) {
    .event-details {
        grid-template-columns: repeat(2, 1fr);  /* 2 columns on tablet */
    }
}

@media (min-width: 992px) {
    .event-details {
        grid-template-columns: repeat(3, 1fr);  /* 3 columns on desktop */
    }
}

/* Ticket type responsive styling */
.ticket-type {
    padding: 1rem;  /* Smaller padding on mobile */
}

.ticket-header {
    flex-direction: column;  /* Stack on mobile */
    gap: 1rem;
}

@media (min-width: 576px) {
    .ticket-type {
        padding: 1.5rem;
    }
    
    .ticket-header {
        flex-direction: row;  /* Side by side on tablet+ */
        justify-content: space-between;
        align-items: center;
    }
}

/* Form responsiveness */
.purchase-form {
    padding: 1rem;
    margin: 1rem auto;
}

@media (min-width: 768px) {
    .purchase-form {
        padding: 2rem;
        margin: 2rem auto;
    }
}

/* Form group responsiveness */
.form-group {
    display: flex;
    flex-direction: column;  /* Stack on mobile */
    gap: 0.5rem;
    margin-bottom: 1rem;
}

@media (min-width: 768px) {
    .form-group {
        display: grid;
        grid-template-columns: 200px 1fr;  /* Side by side on tablet+ */
        gap: 1rem;
        align-items: center;
        margin-bottom: 1.5rem;
    }
}

/* Discount banner responsiveness */
.discount-banner {
    margin: 1rem auto;
    padding: 1.5rem;
}

#discount-message {
    font-size: 1.5rem;  /* Smaller on mobile */
}

@media (min-width: 768px) {
    .discount-banner {
        margin: 2rem auto;
        padding: 2rem;
    }
    
    #discount-message {
        font-size: 2rem;
    }
}

/* Sticky total responsiveness */
.sticky-total {
    padding: 0.75rem;
}

.total-content {
    padding: 0 1rem;
    gap: 1rem;
    flex-direction: column;  /* Stack on mobile */
}

@media (min-width: 768px) {
    .sticky-total {
        padding: 1rem;
    }
    
    .total-content {
        flex-direction: row;  /* Side by side on tablet+ */
        justify-content: space-between;
        align-items: center;
    }
}

/* Question forms responsiveness */
.attendee-group {
    padding: 1rem;
    margin-bottom: 1rem;
    background: #f8f9fa;
    border-radius: 12px;
}

@media (min-width: 768px) {
    .attendee-group {
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }
}

/* Promo code section responsiveness */
.promo-code-section {
    margin: 1rem 0;
}

.promo-code-input-group {
    flex-direction: column;  /* Stack on mobile */
    gap: 0.5rem;
}

@media (min-width: 576px) {
    .promo-code-input-group {
        flex-direction: row;  /* Side by side on tablet+ */
        gap: 1rem;
    }
}

/* Font size adjustments for mobile */
h1 { font-size: 1.75rem; }
h2 { font-size: 1.5rem; }
h3 { font-size: 1.25rem; }

@media (min-width: 768px) {
    h1 { font-size: 2.5rem; }
    h2 { font-size: 2rem; }
    h3 { font-size: 1.75rem; }
}

/* Add smooth scrolling for better mobile experience */
html {
    scroll-behavior: smooth;
}

/* Improve touch targets for mobile */
button, 
input[type="submit"],
.check-promo-btn {
    min-height: 44px;  /* Minimum touch target size */
    min-width: 44px;
}

/* Improve input experience on mobile */
input, 
select, 
textarea {
    font-size: 16px !important;  /* Prevent zoom on focus in iOS */
}

/* Enhanced Mobile & Tablet Responsive Styles */

/* Base Container Adjustments */
.purchase-container {
    padding: 10px;
    margin: 0;
}

@media (min-width: 768px) {
    .purchase-container {
        padding: 20px;
        margin: 0 auto;
    }
}

/* Form Improvements */
.purchase-form {
    padding: 15px;
    margin: 10px;
    border-radius: 12px;
}

@media (min-width: 768px) {
    .purchase-form {
        padding: 30px;
        margin: 20px auto;
    }
}

/* Input & Button Enhancements */
input, select, textarea, button {
    -webkit-appearance: none;
    appearance: none;
    font-size: 16px !important;
    min-height: 44px;
}

/* Improved Ticket Type Display */
.ticket-type {
    padding: 12px;
    margin-bottom: 10px;
}

.ticket-header {
    flex-direction: column;
    gap: 8px;
}

@media (min-width: 576px) {
    .ticket-type {
        padding: 20px;
        margin-bottom: 15px;
    }

    .ticket-header {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
    }
}

/* Enhanced Sticky Total */
.sticky-total {
    padding: 10px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
}

.total-content {
    flex-direction: column;
    gap: 10px;
}

@media (min-width: 768px) {
    .sticky-total {
        padding: 15px 20px;
    }

    .total-content {
        flex-direction: row;
        gap: 20px;
    }
}

/* Improved Promo Code Section */
.promo-code-section {
    margin: 15px 0;
}

.promo-code-input-group {
    flex-direction: column;
    gap: 8px;
}

@media (min-width: 576px) {
    .promo-code-input-group {
        flex-direction: row;
        gap: 10px;
    }
}

/* Better Question Groups */
.question-group {
    margin-bottom: 15px;
}

.question-group input,
.question-group select {
    padding: 12px;
    border-radius: 8px;
}

/* Enhanced Discount Banner */
.discount-banner {
    margin: 15px auto;
    padding: 15px;
}

#discount-message {
    font-size: 1.2rem;
}

@media (min-width: 768px) {
    .discount-banner {
        margin: 30px auto;
        padding: 30px;
    }

    #discount-message {
        font-size: 2rem;
    }
}

/* iOS Specific Fixes */
@supports (-webkit-touch-callout: none) {
    .sticky-total {
        padding-bottom: calc(10px + env(safe-area-inset-bottom));
    }

    input, select, textarea {
        font-size: 16px !important;
    }
}

/* Touch Device Optimization */
@media (hover: none) {
    .submit-btn,
    .check-promo-btn {
        padding: 12px 20px;
    }

    input[type="checkbox"] {
        min-width: 22px;
        min-height: 22px;
    }
}

/* Better Form Layout on Small Screens */
@media (max-width: 480px) {
    .form-group {
        margin-bottom: 12px;
    }

    .form-group label {
        margin-bottom: 4px;
        font-size: 0.9rem;
    }

    .ticket-quantity {
        flex-direction: column;
        align-items: stretch;
    }

    .ticket-price-display {
        text-align: center;
    }
}

.sold-out-badge {
    display: inline-block;
    background: #dc3545;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 50px;
    font-size: 0.9rem;
    font-weight: 600;
    margin-left: 1rem;
}

.ticket-input:disabled {
    background-color: #e9ecef;
    cursor: not-allowed;
}

.ticket-type.sold-out {
    opacity: 0.7;
}
</style>

<!-- Add after the form -->
<div class="sticky-total">
    <div class="total-content">
        <div class="total-details">
            <span class="ticket-count">0 tickets selected</span>
            <div class="price-breakdown">
                <span class="original-price" style="display: none;">Original Price: £<span id="sticky_original_price">0.00</span></span>
                <span class="discount-amount" style="display: none;">Discount: -£<span id="sticky_discount_amount">0.00</span></span>
            </div>
            <span class="total-price">Total: £<span id="sticky_total_price">0.00</span></span>
        </div>
        <button type="submit" form="purchase-form" class="submit-btn">Continue to Payment</button>
    </div>
</div>
{% endblock %} 