
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>view_attendees</title>
<style>
    .attendees-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    h1, h2, h3, h4 {
        color: #ff0000; /* Use your brand's red */
    }

    hr {
        border: 1px solid #f5f5f5;
        margin: 20px 0;
    }

    .action-buttons {
        margin: 20px 0;
        display: flex;
        gap: 15px;
    }

    .button {
        padding: 10px 20px;
        background-color: #ff0000;
        color: white;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }

    .button:hover {
        background-color: #cc0000;
    }

    .button.small {
        padding: 5px 15px;
        font-size: 14px;
    }

    .button.delete {
        background-color: #e74c3c;
    }

    .button.delete:hover {
        background-color: #c0392b;
    }

    .attendees-list {
        list-style-type: none;
        padding: 0;
    }

    .attendee-item {
        background-color: #f9f9f9;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .attendee-item h3 {
        margin-top: 0;
    }

    .attendee-item ul {
        padding-left: 20px;
    }

    .attendee-item ul li {
        list-style-type: disc;
    }
</style>
</head>

{% extends "partials/base-logged-in.html" %}

{% block content %}


<div class="attendees-container">
    <h1>Attendees for Event: {{ event.name }}</h1>
    <h2>Date: {{ event.date }}</h2>
    <h3>Location: {{ event.location }}</h3>

    <hr>

    <div class="action-buttons">
        <a href="{{ url_for('export_attendees', event_id=event.id) }}" class="button">Export Attendees</a>
        <a href="{{ url_for('add_attendee', event_id=event.id) }}" class="button">Add New Attendee</a>
    </div>

    {% if attendees %}
        <h2>Attendees List</h2>
        <ul class="attendees-list">
            {% for attendee in attendees %}
                <li class="attendee-item">
                    <h3>{{ attendee.full_name }}</h3>

                    <!-- Organiser Information (Billing Details) -->
                    <h4>Organiser Information:</h4>
                    <p><strong>Full Name:</strong> {{ attendee.full_name }}</p>
                    <p><strong>Email:</strong> {{ attendee.email }}</p>
                    <p><strong>Phone Number:</strong> {{ attendee.phone_number }}</p>

                    {% if attendee.billing_details.address %}
                        <p><strong>Address:</strong> 
                            {{ attendee.billing_details.address.line1 }},
                            {% if attendee.billing_details.address.line2 %}{{ attendee.billing_details.address.line2 }}, {% endif %}
                            {{ attendee.billing_details.address.city }},
                            {{ attendee.billing_details.address.postal_code }}
                        </p>
                    {% else %}
                        <p><strong>Address:</strong> Not provided</p>
                    {% endif %}
                    
                    <!-- Ticket Questions and Answers -->
                    <h4>Ticket Questions and Answers:</h4>
                    <ul>
                        {% for question, answer in attendee.ticket_answers.items() %}
                            <li><strong>{{ question }}:</strong> {{ answer }}</li>
                        {% endfor %}
                    </ul>

                    <!-- Edit and Delete Buttons -->
                    <div class="action-buttons">
                        <a href="{{ url_for('edit_attendee', attendee_id=attendee.id) }}" class="button small">Edit</a>
                        <form action="{{ url_for('delete_attendee', attendee_id=attendee.id) }}" method="POST" style="display:inline;">
                            <button type="submit" class="button small delete">Delete</button>
                        </form>
                    </div>
                    
                    <hr>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No attendees for this event yet.</p>
    {% endif %}
</div>
{% endblock %}